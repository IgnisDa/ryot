fileGroups:
  remix:
    - app/**/*
    - public/**/*
    - env.d.ts
    - remix.config.*

tasks:
  dev-routes:
    command: remix-routes -w
    local: true

  dev:
    command: vite dev --port 3000 --host
    local: true
    deps:
      - dev-routes
    options:
      runDepsInParallel: true

  build-routes:
    command: remix-routes
    inputs:
      - '@group(remix)'

  build:
    command: vite build && vite build --ssr
    inputs:
      - '@group(remix)'
    outputs:
      - build
      - .cache
      - public/build
    deps:
      - build-routes

  typecheck:
    inputs:
      - '@group(remix)'

import{_ as i,c as a,o as e,aj as t}from"./chunks/framework.lC5GZWV9.js";const c=JSON.parse('{"title":"File Storage","description":"","frontmatter":{},"headers":[],"relativePath":"guides/file-storage.md","filePath":"guides/file-storage.md","lastUpdated":1772193071000}'),n={name:"guides/file-storage.md"};function l(o,s,r,h,p,k){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="file-storage" tabindex="-1">File Storage <a class="header-anchor" href="#file-storage" aria-label="Permalink to “File Storage”">​</a></h1><p>Ryot supports file storage and exporting using S3-compatible services.</p><h2 id="cloudflare-r2" tabindex="-1">Cloudflare R2 <a class="header-anchor" href="#cloudflare-r2" aria-label="Permalink to “Cloudflare R2”">​</a></h2><p>You can configure Ryot to use <a href="https://developers.cloudflare.com/r2" target="_blank" rel="noreferrer">Cloudflare R2</a> for file storage and exporting. R2 is S3-compatible and offers zero egress fees, making it a cost-effective solution for production use.</p><h3 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to “Prerequisites”">​</a></h3><ul><li>A Cloudflare account</li><li>R2 subscription (available in the Cloudflare dashboard)</li></ul><h3 id="setup-instructions" tabindex="-1">Setup Instructions <a class="header-anchor" href="#setup-instructions" aria-label="Permalink to “Setup Instructions”">​</a></h3><ul><li><p>Log into the <a href="https://dash.cloudflare.com" target="_blank" rel="noreferrer">Cloudflare dashboard</a> and navigate to the R2 section.</p></li><li><p>Click &quot;Create bucket&quot; and provide a name for your bucket (e.g., <code>ryot-storage</code>).</p></li><li><p>Go to &quot;Manage R2 API tokens&quot; and click &quot;Create API token&quot;.</p></li><li><p>Configure the token with the following settings:</p><ul><li><strong>Permission</strong>: Choose &quot;Object Read &amp; Write&quot; for full access</li><li><strong>Resources</strong>: Select &quot;Apply to specific buckets&quot; and choose your created bucket</li></ul></li><li><p>Click &quot;Create API token&quot; and copy both the <strong>Access Key ID</strong> and <strong>Secret Access Key</strong>.</p></li><li><p>Note your <strong>Account ID</strong> from the R2 dashboard (found in the right sidebar).</p></li><li><p>On your Ryot instance, set the following environment variables:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FILE_STORAGE_S3_BUCKET_NAME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ryot-storage</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FILE_STORAGE_S3_ACCESS_KEY_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-access-key-id</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FILE_STORAGE_S3_SECRET_ACCESS_KEY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">your-secret-access-key</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FILE_STORAGE_S3_URL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">https://</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ACCOUNT_ID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.r2.cloudflarestorage.com</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">FILE_STORAGE_S3_REGION</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">auto</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # optional: some clients require a region; use &quot;auto&quot; for R2</span></span></code></pre></div><p>Replace <code>&lt;ACCOUNT_ID&gt;</code> with your Cloudflare account ID. Use the actual values for your bucket name and API credentials.</p></li></ul><h3 id="cors-configuration" tabindex="-1">CORS Configuration <a class="header-anchor" href="#cors-configuration" aria-label="Permalink to “CORS Configuration”">​</a></h3><p>To allow your Ryot instance to upload files directly from the browser, you need to configure CORS settings for your R2 bucket:</p><ul><li><p>In the Cloudflare R2 dashboard, select your bucket.</p></li><li><p>Navigate to the <strong>Settings</strong> tab.</p></li><li><p>Scroll to the <strong>CORS Policy</strong> section and click <strong>Edit</strong>.</p></li><li><p>Add the following configuration (adjust the origins to match your Ryot instance URLs):</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;AllowedOrigins&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;https://app.ryot.io&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;https://pro.ryot.io&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;AllowedMethods&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;PUT&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;AllowedHeaders&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;content-type&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div></li></ul>`,11)])])}const u=i(n,[["render",l]]);export{c as __pageData,u as default};
